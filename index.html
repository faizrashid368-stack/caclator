<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cute Calc Pro</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 50%, #fecfef 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 10px;
        }
        
        /* Splash Screen */
        #splash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s;
        }
        
        #splash.hide {
            opacity: 0;
            pointer-events: none;
        }
        
        .splash-icon {
            width: 100px;
            height: 100px;
            background: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 50px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            animation: bounce 1s infinite;
        }
        
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        .splash-text {
            margin-top: 20px;
            color: #fff;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .splash-loader {
            margin-top: 15px;
            width: 120px;
            height: 4px;
            background: rgba(255,255,255,0.4);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .splash-bar {
            height: 100%;
            width: 0%;
            background: white;
            border-radius: 10px;
            animation: load 2s ease-in-out forwards;
        }
        
        @keyframes load {
            0% { width: 0%; }
            100% { width: 100%; }
        }
        
        /* Main App */
        #mainApp {
            display: none;
            width: 100%;
            max-width: 420px;
        }
        
        #mainApp.show {
            display: block;
        }
        
        .calculator {
            background: rgba(255,255,255,0.95);
            border-radius: 25px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
        }
        
        .display {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 15px;
            text-align: right;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }
        
        .shift-indicator {
            position: absolute;
            top: 10px;
            left: 15px;
            background: #ffeb3b;
            color: #333;
            padding: 3px 10px;
            border-radius: 10px;
            font-size: 11px;
            font-weight: bold;
            display: none;
        }
        
        .shift-indicator.active {
            display: block;
        }
        
        .display-wrapper {
            position: relative;
        }
        
        .previous {
            color: rgba(255,255,255,0.7);
            font-size: 14px;
            min-height: 20px;
            word-break: break-all;
            margin-bottom: 5px;
        }
        
        .current {
            color: white;
            font-size: 32px;
            font-weight: bold;
            word-break: break-all;
        }
        
        .mode-toggle {
            display: flex;
            justify-content: center;
            margin-bottom: 10px;
            gap: 8px;
        }
        
        .mode-btn {
            padding: 6px 15px;
            border: none;
            border-radius: 15px;
            background: #f0f0f0;
            color: #666;
            font-size: 11px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mode-btn.active {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: white;
        }
        
        .shift-btn {
            background: linear-gradient(135deg, #ffeb3b 0%, #ffc107 100%);
            color: #333;
            font-weight: bold;
        }
        
        .shift-btn.active {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
        }
        
        .buttons {
            display: grid;
            gap: 10px;
        }
        
        .btn-row {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }
        
        .btn {
            aspect-ratio: 1;
            border: none;
            border-radius: 50%;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            position: relative;
            overflow: hidden;
        }
        
        .btn:active {
            transform: scale(0.9);
        }
        
        .btn-shift-text {
            position: absolute;
            top: 4px;
            left: 4px;
            font-size: 9px;
            color: #ff9800;
            font-weight: bold;
        }
        
        /* Button Colors */
        .btn-number {
            background: #f8f9fa;
            color: #333;
        }
        
        .btn-number:hover {
            background: #e9ecef;
        }
        
        .btn-operator {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: white;
        }
        
        .btn-operator:hover {
            background: linear-gradient(135deg, #ff8589 0%, #fecfef 100%);
        }
        
        .btn-function {
            background: #e3f2fd;
            color: #1976d2;
        }
        
        .btn-function:hover {
            background: #bbdefb;
        }
        
        .btn-scientific {
            background: #f3e5f5;
            color: #7b1fa2;
            font-size: 13px;
        }
        
        .btn-scientific:hover {
            background: #e1bee7;
        }
        
        .btn-shift {
            background: linear-gradient(135deg, #ffeb3b 0%, #ffc107 100%);
            color: #333;
        }
        
        .btn-shift.active {
            background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
            color: white;
        }
        
        .btn-equal {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            grid-column: span 2;
            aspect-ratio: auto;
            border-radius: 25px;
        }
        
        .btn-clear {
            background: #ffebee;
            color: #c62828;
        }
        
        .btn-clear:hover {
            background: #ffcdd2;
        }
        
        .scientific-buttons {
            display: none;
            margin-bottom: 10px;
        }
        
        .scientific-buttons.show {
            display: grid;
        }
        
        .history-panel {
            margin-top: 15px;
            max-height: 120px;
            overflow-y: auto;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 12px;
        }
        
        .history-title {
            font-size: 11px;
            color: #888;
            margin-bottom: 8px;
            text-transform: uppercase;
        }
        
        .history-item {
            padding: 6px;
            border-bottom: 1px solid #e0e0e0;
            font-size: 13px;
            color: #555;
        }
    </style>
</head>
<body>
    <!-- Splash Screen -->
    <div id="splash">
        <div class="splash-icon">üßÆ</div>
        <div class="splash-text">Cute Calc Pro</div>
        <div class="splash-loader">
            <div class="splash-bar"></div>
        </div>
    </div>
    
    <!-- Main App -->
    <div id="mainApp">
        <div class="calculator">
            <div class="display-wrapper">
                <div class="shift-indicator" id="shiftInd">SHIFT</div>
                <div class="display">
                    <div class="previous" id="previous"></div>
                    <div class="current" id="current">0</div>
                </div>
            </div>
            
            <div class="mode-toggle">
                <button class="mode-btn active" onclick="setMode('basic')">Basic</button>
                <button class="mode-btn" onclick="setMode('scientific')">Sci</button>
                <button class="mode-btn shift-btn" id="shiftBtn" onclick="toggleShift()">SHIFT</button>
            </div>
            
            <!-- Scientific Buttons -->
            <div class="scientific-buttons" id="sciButtons">
                <div class="btn-row">
                    <button class="btn btn-scientific" onclick="addFunc('sin')">
                        <span class="btn-shift-text" id="sin-shift">sin‚Åª¬π</span>
                        <span id="sin-main">sin</span>
                    </button>
                    <button class="btn btn-scientific" onclick="addFunc('cos')">
                        <span class="btn-shift-text" id="cos-shift">cos‚Åª¬π</span>
                        <span id="cos-main">cos</span>
                    </button>
                    <button class="btn btn-scientific" onclick="addFunc('tan')">
                        <span class="btn-shift-text" id="tan-shift">tan‚Åª¬π</span>
                        <span id="tan-main">tan</span>
                    </button>
                    <button class="btn btn-scientific" onclick="addFunc('log')">
                        <span class="btn-shift-text" id="log-shift">10À£</span>
                        <span id="log-main">log</span>
                    </button>
                    <button class="btn btn-scientific" onclick="addFunc('ln')">
                        <span class="btn-shift-text" id="ln-shift">eÀ£</span>
                        <span id="ln-main">ln</span>
                    </button>
                </div>
                
                <div class="btn-row">
                    <button class="btn btn-scientific" onclick="addFunc('sqrt')">
                        <span class="btn-shift-text" id="sqrt-shift">x¬≤</span>
                        <span id="sqrt-main">‚àö</span>
                    </button>
                    <button class="btn btn-scientific" onclick="addFunc('pow')">
                        <span class="btn-shift-text" id="pow-shift">À£‚àöy</span>
                        <span id="pow-main">x ∏</span>
                    </button>
                    <button class="btn btn-scientific" onclick="addFunc('pi')">œÄ</button>
                    <button class="btn btn-scientific" onclick="addFunc('e')">e</button>
                    <button class="btn btn-scientific" onclick="addFunc('fact')">n!</button>
                </div>
                
                <div class="btn-row">
                    <button class="btn btn-scientific" onclick="addFunc('inv')">¬π/‚Çì</button>
                    <button class="btn btn-scientific" onclick="addFunc('abs')">|x|</button>
                    <button class="btn btn-scientific" onclick="addFunc('floor')">‚åäx‚åã</button>
                    <button class="btn btn-scientific" onclick="addFunc('ceil')">‚åàx‚åâ</button>
                    <button class="btn btn-scientific" onclick="addToDisplay('(')">(</button>
                </div>
            </div>
            
            <!-- Main Buttons -->
            <div class="buttons">
                <div class="btn-row">
                    <button class="btn btn-clear" onclick="clearAll()">AC</button>
                    <button class="btn btn-clear" onclick="deleteLast()">‚å´</button>
                    <button class="btn btn-function" onclick="addFunc('deg')">DEG</button>
                    <button class="btn btn-function" onclick="addFunc('rad')">RAD</button>
                    <button class="btn btn-operator" onclick="addToDisplay('/')">√∑</button>
                </div>
                
                <div class="btn-row">
                    <button class="btn btn-number" onclick="addToDisplay('7')">7</button>
                    <button class="btn btn-number" onclick="addToDisplay('8')">8</button>
                    <button class="btn btn-number" onclick="addToDisplay('9')">9</button>
                    <button class="btn btn-function" onclick="addFunc('ans')">Ans</button>
                    <button class="btn btn-operator" onclick="addToDisplay('*')">√ó</button>
                </div>
                
                <div class="btn-row">
                    <button class="btn btn-number" onclick="addToDisplay('4')">4</button>
                    <button class="btn btn-number" onclick="addToDisplay('5')">5</button>
                    <button class="btn btn-number" onclick="addToDisplay('6')">6</button>
                    <button class="btn btn-function" onclick="addToDisplay('%')">%</button>
                    <button class="btn btn-operator" onclick="addToDisplay('-')">‚àí</button>
                </div>
                
                <div class="btn-row">
                    <button class="btn btn-number" onclick="addToDisplay('1')">1</button>
                    <button class="btn btn-number" onclick="addToDisplay('2')">2</button>
                    <button class="btn btn-number" onclick="addToDisplay('3')">3</button>
                    <button class="btn btn-scientific" onclick="addFunc('log')">log</button>
                    <button class="btn btn-operator" onclick="addToDisplay('+')">+</button>
                </div>
                
                <div class="btn-row">
                    <button class="btn btn-number" onclick="addToDisplay('0')">0</button>
                    <button class="btn btn-number" onclick="addToDisplay('.')">.</button>
                    <button class="btn btn-scientific" onclick="addToDisplay(')')">)</button>
                    <button class="btn btn-equal" onclick="calculate()">=</button>
                </div>
            </div>
            
            <div class="history-panel" id="historyPanel" style="display: none;">
                <div class="history-title">üìú History</div>
                <div id="historyList"></div>
            </div>
        </div>
    </div>

    <script>
        // Splash screen
        setTimeout(() => {
            document.getElementById('splash').classList.add('hide');
            document.getElementById('mainApp').classList.add('show');
        }, 2000);
        
        let current = '0';
        let previous = '';
        let history = JSON.parse(localStorage.getItem('calcHistory') || '[]');
        let shiftMode = false;
        let angleMode = 'deg'; // deg or rad
        let lastAnswer = '0';
        
        function updateDisplay() {
            document.getElementById('current').textContent = current;
            document.getElementById('previous').textContent = previous;
        }
        
        function toggleShift() {
            shiftMode = !shiftMode;
            document.getElementById('shiftBtn').classList.toggle('active');
            document.getElementById('shiftInd').classList.toggle('active');
            
            // Toggle button texts
            const pairs = [
                ['sin-main', 'sin-shift', 'sin', 'asin'],
                ['cos-main', 'cos-shift', 'cos', 'acos'],
                ['tan-main', 'tan-shift', 'tan', 'atan'],
                ['log-main', 'log-shift', 'log', '10^'],
                ['ln-main', 'ln-shift', 'ln', 'e^'],
                ['sqrt-main', 'sqrt-shift', '‚àö', 'x¬≤'],
                ['pow-main', 'pow-shift', 'x ∏', 'À£‚àöy']
            ];
            
            pairs.forEach(([mainId, shiftId, normal, shifted]) => {
                document.getElementById(mainId).textContent = shiftMode ? shifted : normal;
            });
        }
        
        function addToDisplay(value) {
            if (current === '0' && value !== '.') {
                current = value;
            } else {
                current += value;
            }
            updateDisplay();
        }
        
        function addFunc(func) {
            switch(func) {
                // Trig functions
                case 'sin':
                    current += shiftMode ? 'asin(' : 'sin(';
                    break;
                case 'cos':
                    current += shiftMode ? 'acos(' : 'cos(';
                    break;
                case 'tan':
                    current += shiftMode ? 'atan(' : 'tan(';
                    break;
                    
                // Log functions
                case 'log':
                    if (shiftMode) {
                        current += '10^(';
                    } else {
                        current += 'log(';
                    }
                    break;
                case 'ln':
                    if (shiftMode) {
                        current += 'e^(';
                    } else {
                        current += 'ln(';
                    }
                    break;
                    
                // Power functions
                case 'sqrt':
                    if (shiftMode) {
                        current += '^2';
                    } else {
                        current += 'sqrt(';
                    }
                    break;
                case 'pow':
                    if (shiftMode) {
                        current += '^(1/';
                    } else {
                        current += '^';
                    }
                    break;
                    
                // Constants
                case 'pi':
                    current += '3.14159265359';
                    break;
                case 'e':
                    current += '2.71828182846';
                    break;
                    
                // Other functions
                case 'fact':
                    current += '!';
                    break;
                case 'inv':
                    current = '1/(' + current + ')';
                    break;
                case 'abs':
                    current = 'abs(' + current + ')';
                    break;
                case 'floor':
                    current = 'floor(' + current + ')';
                    break;
                case 'ceil':
                    current = 'ceil(' + current + ')';
                    break;
                case 'exp':
                    current += 'e';
                    break;
                case 'deg':
                    angleMode = 'deg';
                    previous = 'DEG mode';
                    updateDisplay();
                    return;
                case 'rad':
                    angleMode = 'rad';
                    previous = 'RAD mode';
                    updateDisplay();
                    return;
                case 'ans':
                    current += lastAnswer;
                    break;
            }
            updateDisplay();
        }
        
        function clearAll() {
            current = '0';
            previous = '';
            updateDisplay();
        }
        
        function deleteLast() {
            if (current.length > 1) {
                current = current.slice(0, -1);
            } else {
                current = '0';
            }
            updateDisplay();
        }
        
        function toRadians(degrees) {
            return degrees * (Math.PI / 180);
        }
        
        function calculate() {
            try {
                let expression = current
                    .replace(/√ó/g, '*')
                    .replace(/√∑/g, '/')
                    .replace(/‚àí/g, '-')
                    .replace(/sin\(/g, angleMode === 'deg' ? 'Math.sin(Math.PI/180*' : 'Math.sin(')
                    .replace(/cos\(/g, angleMode === 'deg' ? 'Math.cos(Math.PI/180*' : 'Math.cos(')
                    .replace(/tan\(/g, angleMode === 'deg' ? 'Math.tan(Math.PI/180*' : 'Math.tan(')
                    .replace(/asin\(/g, angleMode === 'deg' ? '(180/Math.PI)*Math.asin(' : 'Math.asin(')
                    .replace(/acos\(/g, angleMode === 'deg' ? '(180/Math.PI)*Math.acos(' : 'Math.acos(')
                    .replace(/atan\(/g, angleMode === 'deg' ? '(180/Math.PI)*Math.atan(' : 'Math.atan(')
                    .replace(/log\(/g, 'Math.log10(')
                    .replace(/ln\(/g, 'Math.log(')
                    .replace(/10\^\(/g, 'Math.pow(10,')
                    .replace(/e\^\(/g, 'Math.exp(')
                    .replace(/sqrt\(/g, 'Math.sqrt(')
                    .replace(/abs\(/g, 'Math.abs(')
                    .replace(/floor\(/g, 'Math.floor(')
                    .replace(/ceil\(/g, 'Math.ceil(')
                    .replace(/\^/g, '**')
                    .replace(/(\d+)!/g, (match, n) => factorial(parseInt(n)))
                    .replace(/e/g, '2.71828182846');
                
                let result = eval(expression);
                
                // Handle special cases
                if (!isFinite(result)) {
                    throw new Error('Invalid');
                }
                
                // Round to avoid long decimals
                result = Math.round(result * 10000000000) / 10000000000;
                
                previous = current + ' =';
                lastAnswer = result.toString();
                current = lastAnswer;
                
                // Save to history
                saveToHistory(previous + ' ' + current);
                
                updateDisplay();
                
                // Show history
                document.getElementById('historyPanel').style.display = 'block';
                
                // Reset shift mode
                if (shiftMode) toggleShift();
                
            } catch (e) {
                current = 'Error';
                updateDisplay();
                setTimeout(() => {
                    current = '0';
                    updateDisplay();
                }, 1500);
            }
        }
        
        function factorial(n) {
            if (n < 0) return 0;
            if (n > 170) return Infinity;
            if (n === 0 || n === 1) return 1;
            let result = 1;
            for (let i = 2; i <= n; i++) result *= i;
            return result;
        }
        
        function setMode(mode) {
            document.querySelectorAll('.mode-btn').forEach((btn, i) => {
                btn.classList.toggle('active', 
                    (mode === 'basic' && i === 0) || 
                    (mode === 'scientific' && i === 1)
                );
            });
            
            if (mode === 'scientific') {
                document.getElementById('sciButtons').classList.add('show');
            } else {
                document.getElementById('sciButtons').classList.remove('show');
            }
        }
        
        function saveToHistory(calculation) {
            history.unshift(calculation);
            if (history.length > 10) history.pop();
            localStorage.setItem('calcHistory', JSON.stringify(history));
            loadHistory();
        }
        
        function loadHistory() {
            const list = document.getElementById('historyList');
            list.innerHTML = history.map(item => 
                `<div class="history-item">${item}</div>`
            ).join('');
        }
        
        // Load history on start
        if (history.length > 0) {
            document.getElementById('historyPanel').style.display = 'block';
            loadHistory();
        }
    </script>
</body>
</html>